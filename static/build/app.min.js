!function(e,t){var n=[],o=function(){for(var o,i=0;i<n.length;)o=n[i++],o=o.container||o,o.removeEventListener("mousedown",o.md),e.removeEventListener("mouseup",o.mu),e.removeEventListener("mousemove",o.mm);for(n=[t.documentElement,t.body],i=0;i<n.length;)!function(n){var o,i,r,l,a=n.container||n;a.addEventListener("mousedown",a.md=function(e){n.hasAttribute("nochilddrag")&&t.elementFromPoint(e.pageX,e.pageY)!=a||(r=1,o=e.clientX,i=e.clientY,e.preventDefault())}),e.addEventListener("mouseup",a.mu=function(){r=0}),e.addEventListener("mousemove",a.mm=function(e){if(r){l=n.scroller||n;var t=l.scrollLeft-(o*-1+e.clientX),a=l.scrollTop-(i*-1+e.clientY);l.scrollLeft=t,o=e.clientX,l.scrollTop=a,i=e.clientY}})}(n[i++])};"complete"==t.readyState?o():e.addEventListener("load",o,0)}(window,document),function(e,t,n){function o(){C.init(),T.init(),z.init()}function i(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&t(JSON.parse(n.responseText))},n.open("GET",e),n.send(null)}function r(e){var t=e.getBoundingClientRect();return t.bottom>=0&&t.right>=0&&t.top<=h.clientHeight&&t.left<=h.clientWidth}function l(e){for(var t=0;e=e.previousElementSibling;t++);return t}function a(e){return e.getBoundingClientRect()}function s(e){(t.querySelector("#filters input:checked:not(#"+e+")")||{}).checked=!1}function c(e,t){e[t]&&v[t]&&e[t].setAttribute("title",v[t])}function u(e,n,o){if(void 0===e.ondblclick){var i,r,l,n=Math.abs(+n)||500,o=Math.abs(+o)||40,a=function(){i=0,l=r=NaN};a(),e.addEventListener("touchstart",function(s){var c=s.changedTouches[0]||{},u=r,d=l;i++,r=+c.pageX||+c.clientX||+c.screenX,l=+c.pageY||+c.clientY||+c.screenY,Math.abs(u-r)<o&&Math.abs(d-l)<o&&(u=t.createEvent("MouseEvents"),u.initMouseEvent&&u.initMouseEvent("dblclick",!0,!0,s.view,i,c.screenX,c.screenY,c.clientX,c.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,c.target),e.dispatchEvent(u)),setTimeout(a,n)},!1),e.addEventListener("touchmove",function(){a()},!1)}}var d,m,p,f={COMPACT:690},h=t.documentElement,g={PERIOD:"p",GROUP:"g",BLOCK:"b",CATEGORY:"c",STATE:"s",YEAR:"y",FIND:"f"},y={C:"c",F:"f",K:"k"},v={am:"Relative atmoic mass",an:"Atomic number"},b={FILTERED:"filtered",FILTERING:"filtering"},E={header:t.querySelector("header"),wrap:t.querySelector("#wrap"),toggleFilters:t.querySelector("#toggle-filters"),filters:t.querySelector("#filters"),zoom:t.querySelector("[zoom]"),tables:t.querySelector("#tables"),elements:t.querySelectorAll("td[s]"),temp:t.querySelector("#temp"),find:t.querySelector("#find"),year:t.querySelector("#year"),yearApply:t.querySelector("#year-apply")};E.tempUnit=E.temp.nextElementSibling;var C={loadedArea:{y:h.clientHeight,x:h.clientWidth},zoom:parseInt(E.zoom.getAttribute("zoom")),temp:n.temp?parseInt(n.temp):298.15,tempUnit:n.tempUnit||"k",year:n.year||(new Date).getFullYear()};C.init=function(){var e,t={};for(d=0;d<E.elements.length;d++){e=E.elements[d];var n=e.querySelector.bind(e),o=e.getAttribute("c"),i=parseInt(e.getAttribute("y")),r="l"===o||"a"===o,a=l(e),s=e.getAttribute("t").split(","),u=t[e.getAttribute("s")]={zoomAvailable:C.zoom,node:e,c:o,y:i,s:n(".s"),n:n(".n"),an:n(".an"),am:n(".am"),d:n(".d"),md:n(".md"),r:n(".r"),g:r?o:a,p:r?null:l(e.parentNode),b:r?"f":a<3?"s":a<13?"d":"p",mp:s[0]||null,bp:s[1]||null};c(u,"an"),c(u,"am")}C.elements=t},C.zoomWith=function(e,t){(e<0&&C.zoom>0||e>0&&C.zoom<4)&&(C.zoom=C.zoom+e,T.zoomTo(e,t))},C.zoomTo=function(e,t){var n=e-C.zoom;C.zoomWith(n,t)},C.addFieldsForElement=function(e){var t=C.elements[e.symbol];t.zoomAvailable=Math.max(t.zoomAvailable,C.zoom),T.injectFieldsForElement(e)};var T={};T.origin=null,T.init=function(){function n(e){var n=t.querySelectorAll("th["+e.charAt(0).toLowerCase()+"]");for(d=0;d<n.length;d++)n[d].setAttribute("title",e+" "+n[d].textContent.replace(/\*+\s/,"")+p)}var o=E.tables,i=e.innerWidth,r=e.innerHeight;t.body.style.overflow="ontouchstart"in e||navigator.maxTouchPoints?"auto":"hidden";var l={width:a(o).width,height:a(o).height,offsetWidth:o.offsetWidth,offsetHeight:o.offsetHeight},s={width:3e4,height:15e3},c={left:(s.width-l.width)/2,top:(s.height-l.height)/2},u=T.initScroll={left:(s.width-l.width)/2,top:(s.height-l.height)/2};E.wrap.style.width=s.width+"px",E.wrap.style.height=s.height+"px",o.style.left=c.left+"px",o.style.top=c.top+"px",o.style.transformOrigin="50% 50%",E.filters.style.display="block";var m={left:i>l.width?u.left-(i-l.width)/2:c.left,top:r>l.height?u.top-(r-l.height)/2:c.top};e.scrollTo(m.left,m.top),T.fitToScreen(),e.addEventListener("resize",T.fitToScreen);var p=" (click to toggle highlight)";n("Group"),n("Period"),n("Block"),E.tempUnit.value=C.tempUnit,T.tempUnitChanged(),E.year.value=C.year},T.fitToScreen=function(){var n=e.innerWidth,o=n<f.COMPACT?(e.innerWidth-50)/(10*E.tables.querySelector("td").offsetWidth)*100+"%":"100%",i=t.styleSheets[0].cssRules,r=Array.prototype.slice.call(i),l=r.filter(function(e){return'[zoom="4"] .details'===e.selectorText})[0],a=r.filter(function(e){return'[zoom="4"] .r'===e.selectorText})[0];l&&a?(l.style.width=o,a.style.width=o):console.warn("Could not find rules to update for fit-to-screen")},T.tempChanged=function(){var e=parseInt(E.temp.value);isNaN(e)&&(e=C.temp),C.temp=C.tempUnit===y.C?e+273.15:C.tempUnit===y.F?5*(e+459.67)/9:e,C.filter&&C.filter.split("_")[0]===g.STATE&&T.applyFilter(g.STATE,C.filter.split("_")[1],!0),n.temp=C.temp},T.tempUnitChanged=function(){C.tempUnit=E.tempUnit.value;var e=C.tempUnit===y.C?C.temp-273.15:C.tempUnit===y.F?9*C.temp/5-459.67:C.temp;E.temp.value=Math.round(e),n.tempUnit=C.tempUnit},T.yearChanged=function(){var e=parseInt(E.year.value);T.applyFilter(g.YEAR,isNaN(e)?(new Date).getFullYear():e),n.year=isNaN(e)?null:e},T.findChanged=function(){var e=E.find.value;e=e&&e.toLowerCase().trim()||"",T.applyFilter(g.FIND,e)},T.zoomTo=function(t,n){var o=E.tables;T.origin=t<0&&T.origin?T.origin:{x:(a(o).left*-1+n.x)/a(o).width,y:(a(o).top*-1+n.y)/a(o).height},E.tables.style.transformOrigin=100*T.origin.x+"% "+100*T.origin.y+"%";var i=T.initScroll.left+T.origin.x*o.offsetWidth-(e.pageXOffset+n.x),r=T.initScroll.top+T.origin.y*o.offsetHeight-(e.pageYOffset+n.y);e.scrollBy(i,r),E.zoom.setAttribute("zoom",C.zoom),T.panTo(t),history.replaceState(null,"","?z="+C.zoom)},T.panTo=function(e){var t=C.zoom,n=[],o=[];(!e||e>0)&&(o=Object.keys(C.elements).reduce(function(e,t){return r(C.elements[t].node)&&e.push(t),e},[]),n=o.reduce(function(e,n){return C.elements[n].zoomAvailable<t&&(C.elements[n].zoomAvailable=t,e.push(n)),e},[])),n.length&&i("/fields?z="+t+"&s="+encodeURIComponent(JSON.stringify(n)),function(e){e.forEach(C.addFieldsForElement)})},T.injectFieldsForElement=function(e){function n(e,n){for(d=0;d<n.length;d++){var o=C.elements[e.symbol].node;if(!o.querySelectorAll("."+n[d]).length){var i=t.createElement("div");i.innerHTML=e[n[d]];var r=i.firstChild;o.firstElementChild.appendChild(r),C.elements[e.symbol][n[d]]=r,c(C.elements[e.symbol],n[d])}}}1===C.zoom&&n(e,["an"]),2===C.zoom&&n(e,["n","am"]),3===C.zoom&&n(e,["n","am","d"]),4===C.zoom&&n(e,["n","am","d","md","r"])},T.applyFilter=function(e,t,n){if(!(n||t&&C.filter!==e+"_"+t))return delete C.filter,E.tables.classList.remove(b.FILTERING),void setTimeout(s,0);C.filter=e+"_"+t,E.tables.classList.add(b.FILTERING);var o,i=C.elements,r=Object.keys(i);for(t=t.split&&t.split(",")||[t],d=0;d<r.length;d++){var l=i[r[d]];for(o=!1,m=0;m<t.length&&!o;m++)o=e===g.STATE&&"gas"===t[m]&&l.bp&&l.bp<C.temp||"liquid"===t[m]&&l.mp&&l.bp&&l.mp<C.temp&&l.bp>C.temp||"solid"===t[m]&&l.mp&&l.mp>C.temp||e===g.YEAR&&(isNaN(l.y)||l.y<=t[m])||e===g.FIND&&(0===l.s.textContent.toLowerCase().indexOf(t[m])||0===l.s.getAttribute("title").toLowerCase().indexOf(t[m]))||l[e]==t[m],o?l.node.classList.add(b.FILTERED):l.node.classList.remove(b.FILTERED)}};var z={};z.init=function(){E.filters.onmousedown=function(e){e.stopPropagation()},t.onclick=function(n){var o=n.target;if("A"===o.tagName&&"zoom"===o.parentNode.id)C.zoomWith(parseInt(o.getAttribute("value")),{x:e.innerWidth/2,y:e.innerHeight/2}),n.preventDefault();else if("TH"===o.tagName)o.hasAttribute("group")?T.applyFilter(g.GROUP,o.getAttribute("group")||o.textContent):o.hasAttribute("block")?T.applyFilter(g.BLOCK,o.textContent):o.hasAttribute("period")&&T.applyFilter(g.PERIOD,o.textContent);else if("A"===o.tagName&&o.parentNode.parentNode.classList.contains("tabs-nav")){var i=o.parentNode.parentNode.children;for(d=0;d<i.length;d++)i[d].style.display=i[d].firstElementChild===o?i[d].classList.add("active"):i[d].classList.remove("active");var r=t.querySelector(o.getAttribute("href")),l=r.parentNode.children;for(d=0;d<l.length;d++){l[d].style.display=l[d]===r?"block":"none";var a=r.querySelector(".iframe");if(a){var s=t.createElement("iframe");for(a.parentNode.appendChild(s),m=0;m<a.attributes.length;m++)s.setAttribute(a.attributes[m].name,a.attributes[m].value);a.parentNode.removeChild(a)}}n.preventDefault()}},t.onchange=function(e){var t=e.target;"INPUT"===t.tagName&&"filter-category"===t.parentNode.id?(s(t.id),T.applyFilter(g.CATEGORY,t.value)):"INPUT"===t.tagName&&"filter-state"===t.parentNode.id&&(s(t.id),T.applyFilter(g.STATE,t.value))},u(E.tables),E.tables.ondblclick=function(e){C.zoomWith(1,{x:e.clientX,y:e.clientY})};var n=!0;E.tables.onwheel=function(e){n&&(C.zoomWith(e.deltaY>0?-1:1,{x:e.clientX,y:e.clientY}),e.preventDefault(),n=!1,setTimeout(function(){n=!0},1e3))};var o,i,r;t.ontouchstart=function(e){if(2===e.touches.length){o={x:e.touches[0].clientX,y:e.touches[0].clientY};var t={x:e.touches[1].clientX,y:e.touches[1].clientY};i=Math.pow(Math.abs(t.x-o.x),2)+Math.pow(Math.abs(t.y-o.y),2),r={x:(o.x+t.x)/2,y:(t.y+t.y)/2},e.preventDefault()}},t.ontouchend=function(e){if(o&&e.touches.length){var t={x:e.touches[0].clientX,y:e.touches[0].clientY},n=Math.pow(Math.abs(t.x-o.x),2)+Math.pow(Math.abs(t.y-o.y),2);console.log(n-i),C.zoomWith(n-i>0?1:-1,{x:r.x,y:r.y}),o=null,e.preventDefault()}},E.tempUnit.onchange=T.tempUnitChanged,E.temp.onchange=T.tempChanged,E.yearApply.onclick=T.yearChanged,E.find.onkeyup=function(e){16!=e.keyCode&&T.findChanged()},e.onscroll=function(){p=!0},setInterval(function(){p&&(p=!1,C.zoom>1&&(T.origin=null,T.panTo()))},100),e.onkeydown=function(e){32===e.keyCode&&e.preventDefault()},e.onkeypress=function(n){function o(){return{x:e.innerWidth/2,y:e.innerHeight/2}}var i=n.target;if(n.keyCode>=48&&n.keyCode<=52&&(C.zoomTo(parseInt(String.fromCharCode(n.keyCode)),o()),n.preventDefault()),45===n.keyCode&&(C.zoomWith(-1,o()),n.preventDefault()),61===n.keyCode&&(C.zoomWith(1,o()),n.preventDefault()),102===n.keyCode&&(E.toggleFilters.checked?E.toggleFilters.checked=!1:(E.toggleFilters.checked=!0,E.temp.focus()),n.preventDefault()),114===n.keyCode&&(T.init(),C.zoomTo(1,o()),n.preventDefault()),13===n.keyCode&&"TH"===i.tagName){var r=t.createEvent("Events");r.initEvent("click",!0,!1),i.dispatchEvent(r)}},e.onorientationchange=function(){T.init()}},"interactive"===t.readyState||"complete"===t.readyState?o():t.addEventListener("DOMContentLoaded",o)}(window,document,window.localStorage);