!function(e,t){var n="mousemove",i="mouseup",o="mousedown",a="addEventListener",r="removeEventListener",l=[],s=function(s,c){for(s=0;s<l.length;)c=l[s++],c=c.container||c,c[r](o,c.md,0),e[r](i,c.mu,0),e[r](n,c.mm,0);for(l=[t.documentElement,t.body],s=0;s<l.length;)!function(r,l,s,c,u,m){(m=r.container||r)[a](o,m.md=function(e){r.hasAttribute("nochilddrag")&&t.elementFromPoint(e.pageX,e.pageY)!=m||(c=1,l=e.clientX,s=e.clientY,e.preventDefault())},0),e[a](i,m.mu=function(){c=0},0),e[a](n,m.mm=function(e){c&&((u=r.scroller||r).scrollLeft-=-l+(l=e.clientX),u.scrollTop-=-s+(s=e.clientY))},0)}(l[s++])};"complete"==t.readyState?s():e[a]("load",s,0)}(window,document),function(e,t,n){function i(){E.init(),z.init(),A.init()}function o(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&t(JSON.parse(n.responseText))},n.open("GET",e),n.send(null)}function a(e){var t=e.getBoundingClientRect();return t.bottom>=0&&t.right>=0&&t.top<=f.clientHeight&&t.left<=f.clientWidth}function r(e){for(var t=0;e=e.previousElementSibling;t++);return t}function l(e){return e.getBoundingClientRect()}function s(e){(t.querySelector("#f input:checked:not(#"+e+")")||{}).checked=!1}function c(e,t){e[t]&&y[t]&&e[t].setAttribute("title",y[t])}function u(e,n,i){if(void 0===e.ondblclick){var o,a,r,n=Math.abs(+n)||500,i=Math.abs(+i)||40,l=function(){o=0,r=a=NaN};l(),e.addEventListener("touchstart",function(s){var c=s.changedTouches[0]||{},u=a,m=r;o++,a=+c.pageX||+c.clientX||+c.screenX,r=+c.pageY||+c.clientY||+c.screenY,Math.abs(u-a)<i&&Math.abs(m-r)<i&&(u=t.createEvent("MouseEvents"),u.initMouseEvent&&u.initMouseEvent("dblclick",!0,!0,s.view,o,c.screenX,c.screenY,c.clientX,c.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,c.target),e.dispatchEvent(u)),setTimeout(l,n)},!1),e.addEventListener("touchmove",function(){l()},!1)}}var m,d,p,f=t.documentElement,h={PERIOD:"p",GROUP:"g",BLOCK:"b",CATEGORY:"c",STATE:"s",YEAR:"y",FIND:"f"},y={am:"Relative atmoic mass",an:"Atomic number"},g={FILTERED:"filtered",FILTERING:"filtering"},v={x:14400,y:7500},b={header:t.querySelector("header"),wrap:t.querySelector("#wrap"),filters:t.querySelector("#f"),zoom:t.querySelector("[z]"),tables:t.querySelector("#tables"),elements:t.querySelectorAll("td[s]"),temp:t.querySelector("#temp"),find:t.querySelector("#find"),year:t.querySelector("#year"),yearApply:t.querySelector("#yearApply")};b.tempUnit=b.temp.nextElementSibling;var E={loadedArea:{y:f.clientHeight,x:f.clientWidth},zoom:parseInt(b.zoom.getAttribute("z")),temp:n.temp?parseInt(n.temp):298.15,tempUnit:n.tempUnit||"k",year:n.year||(new Date).getFullYear()};E.init=function(){var e,t={};for(m=0;m<b.elements.length;m++){e=b.elements[m];var n=e.querySelector.bind(e),i=e.getAttribute("c"),o=parseInt(e.getAttribute("y")),a="l"==i||"a"==i,l=r(e),s=e.getAttribute("t").split(","),u=t[e.getAttribute("s")]={zoomAvailable:E.zoom,node:e,c:i,y:o,s:n(".s"),n:n(".n"),an:n(".an"),am:n(".am"),d:n(".d"),md:n(".md"),r:n(".r"),g:a?i:l,p:a?null:r(e.parentNode),b:a?"f":l<3?"s":l<13?"d":"p",mp:s[0]||null,bp:s[1]||null};c(u,"an"),c(u,"am")}E.elements=t},E.zoomWith=function(e,t){(e<0&&E.zoom>1||e>0&&E.zoom<4)&&(E.zoom=E.zoom+e,z.zoomTo(e,t))},E.addFieldsForElement=function(e){var t=E.elements[e.symbol];t.zoomAvailable=Math.max(t.zoomAvailable,E.zoom),z.injectFieldsForElement(e)};var z={};z.origin=null,z.init=function(){function n(e){var n=t.querySelectorAll("th["+e.charAt(0).toLowerCase()+"]");for(m=0;m<n.length;m++)n[m].setAttribute("title",e+" "+n[m].textContent.replace(/\*+\s/,"")+c)}var i=b.tables,o=e.innerWidth,a=e.innerHeight;t.body.style.overflow="ontouchstart"in e||navigator.maxTouchPoints?"auto":"hidden",b.wrap.style.width="30000px",b.wrap.style.height="15000px",i.style.left="14400px",i.style.top="7500px",i.style.transformOrigin="50% 50%",b.filters.style.display="block";var r={width:l(i).width,height:l(i).height},s={x:o>r.width?v.x-(o-r.width)/2:v.x,y:a>r.height?v.y-(a-r.height)/2:v.y};e.scrollTo(s.x,s.y);var c=" (click to toggle highlight)";n("Group"),n("Period"),n("Block"),b.tempUnit.value=E.tempUnit,z.tempUnitChanged(),b.year.value=E.year},z.tempChanged=function(){var e=parseInt(b.temp.value);isNaN(e)&&(e=E.temp),E.temp="c"==E.tempUnit?e+273.15:"f"==E.tempUnit?5*(e+459.67)/9:e,E.filter&&E.filter.split("_")[0]==h.STATE&&z.applyFilter(h.STATE,E.filter.split("_")[1],!0),n.temp=E.temp},z.tempUnitChanged=function(){E.tempUnit=b.tempUnit.value;var e="c"==E.tempUnit?E.temp-273.15:"f"==E.tempUnit?9*E.temp/5-459.67:E.temp;b.temp.value=Math.round(e),n.tempUnit=E.tempUnit},z.yearChanged=function(){var e=parseInt(b.year.value);z.applyFilter(h.YEAR,isNaN(e)?(new Date).getFullYear():e),n.year=isNaN(e)?null:e},z.findChanged=function(){var e=b.find.value;e=e&&e.toLowerCase().trim()||"",z.applyFilter(h.FIND,e)},z.zoomTo=function(t,n){var i=b.tables;if(z.origin=t<0&&z.origin?z.origin:{x:(l(i).left*-1+n.x)/l(i).width,y:(l(i).top*-1+n.y)/l(i).height},b.tables.style.transformOrigin=100*z.origin.x+"% "+100*z.origin.y+"%",E.zoom>1){var o=v.x+z.origin.x*i.offsetWidth-(e.pageXOffset+n.x),a=v.y+z.origin.y*i.offsetHeight-(e.pageYOffset+n.y);e.scrollBy(o,a)}b.zoom.setAttribute("z",E.zoom),z.panTo(t),history.replaceState(null,"","?z="+E.zoom)},z.panTo=function(e){var t=E.zoom,n=[],i=[];!e||e>0?(i=Object.keys(E.elements).reduce(function(e,t){return a(E.elements[t].node)&&e.push(t),e},[]),n=i.reduce(function(e,n){return E.elements[n].zoomAvailable<t&&(E.elements[n].zoomAvailable=t,e.push(n)),e},[])):i=Object.keys(E.elements),n.length?o("/fields?z="+t+"&s="+encodeURIComponent(JSON.stringify(n)),function(e){e.forEach(E.addFieldsForElement),i.forEach(z.updateVisibility)}):i.forEach(z.updateVisibility)},z.injectFieldsForElement=function(e){function n(e,n){for(m=0;m<n.length;m++){var i=E.elements[e.symbol].node;if(!i.querySelectorAll("."+n[m]).length){var o=t.createElement("div");o.innerHTML=e[n[m]];var a=o.firstChild;a.classList.add("out"),i.firstElementChild.appendChild(a),E.elements[e.symbol][n[m]]=a,c(E.elements[e.symbol],n[m])}}}2==E.zoom&&n(e,["n","am"]),3==E.zoom&&n(e,["n","am","d"]),4==E.zoom&&n(e,["n","am","d","md","r"])},z.updateVisibility=function(e){var t,n=[{cn:"n",z:2},{cn:"am",z:2},{cn:"d",z:3},{cn:"md",z:4},{cn:"r",z:4}];for(m=0;m<n.length;m++)t=E.elements[e][n[m].cn],t&&(n[m].z<=E.zoom?(t.classList.add("in"),t.classList.remove("out")):(t.classList.add("out"),t.classList.remove("in")))},z.applyFilter=function(e,t,n){if(!(n||t&&E.filter!=e+"_"+t))return delete E.filter,b.tables.classList.remove(g.FILTERING),void setTimeout(s,0);E.filter=e+"_"+t,b.tables.classList.add(g.FILTERING);var i,o=E.elements,a=Object.keys(o);for(t=t.split&&t.split(",")||[t],m=0;m<a.length;m++){var r=o[a[m]];for(i=!1,d=0;d<t.length&&!i;d++)i=e==h.STATE&&"G"==t[d]&&r.bp&&r.bp<E.temp||"L"==t[d]&&r.mp&&r.bp&&r.mp<E.temp&&r.bp>E.temp||"S"==t[d]&&r.mp&&r.mp>E.temp||e==h.YEAR&&(isNaN(r.y)||r.y<=t[d])||e==h.FIND&&(0===r.s.textContent.toLowerCase().indexOf(t[d])||0===r.s.getAttribute("title").toLowerCase().indexOf(t[d]))||r[e]==t[d],i?r.node.classList.add(g.FILTERED):r.node.classList.remove(g.FILTERED)}};var A={};A.init=function(){b.filters.onmousedown=function(e){e.stopPropagation()},t.onclick=function(n){var i=n.target;if("A"==i.tagName&&"z"==i.parentNode.id)E.zoomWith(parseInt(i.getAttribute("value")),{x:e.innerWidth/2,y:e.innerHeight/2}),n.preventDefault();else if("TH"==i.tagName)i.hasAttribute("g")?z.applyFilter(h.GROUP,i.getAttribute("g")||i.textContent):i.hasAttribute("b")?z.applyFilter(h.BLOCK,i.textContent):i.hasAttribute("p")&&z.applyFilter(h.PERIOD,i.textContent);else if("A"==i.tagName&&i.parentNode.parentNode.classList.contains("tabs-nav")){var o=i.parentNode.parentNode.children;for(m=0;m<o.length;m++)o[m].style.display=o[m].firstElementChild==i?o[m].classList.add("active"):o[m].classList.remove("active");var a=t.querySelector(i.getAttribute("href")),r=a.parentNode.children;for(m=0;m<r.length;m++){r[m].style.display=r[m]==a?"block":"none";var l=a.querySelector(".iframe");if(l){var s=t.createElement("iframe");for(l.parentNode.appendChild(s),d=0;d<l.attributes.length;d++)s.setAttribute(l.attributes[d].name,l.attributes[d].value);l.parentNode.removeChild(l)}}n.preventDefault()}},t.onchange=function(e){var t=e.target;"INPUT"==t.tagName&&"fc"==t.parentNode.id?(s(t.id),z.applyFilter(h.CATEGORY,t.value)):"INPUT"==t.tagName&&"fs"==t.parentNode.id&&(s(t.id),z.applyFilter(h.STATE,t.value))},u(b.tables),b.tables.ondblclick=function(e){E.zoomWith(1,{x:e.clientX,y:e.clientY})};var n=!0;b.tables.onwheel=function(e){n&&(E.zoomWith(e.deltaY>0?-1:1,{x:e.clientX,y:e.clientY}),e.preventDefault(),n=!1,setTimeout(function(){n=!0},1e3))};var i,o,a;t.ontouchstart=function(e){if(2==e.touches.length){i={x:e.touches[0].clientX,y:e.touches[0].clientY};var t={x:e.touches[1].clientX,y:e.touches[1].clientY};o=(2^Math.abs(t.x-i.x))+(2^Math.abs(t.y-i.y)),a={x:(i.x+t.x)/2,y:(t.y+t.y)/2},e.preventDefault()}},t.ontouchend=function(e){if(i&&e.touches.length){var t={x:e.touches[0].clientX,y:e.touches[0].clientY},n=(2^Math.abs(t.x-i.x))+(2^Math.abs(t.y-i.y));E.zoomWith(n-o>0?1:-1,{x:a.x,y:a.y}),i=null,e.preventDefault()}},b.tempUnit.onchange=z.tempUnitChanged,b.temp.onchange=z.tempChanged,b.yearApply.onclick=z.yearChanged,b.find.onkeyup=function(e){16!=e.keyCode&&z.findChanged()},e.onscroll=function(){p=!0},setInterval(function(){p&&(p=!1,E.zoom>1&&(z.origin=null,z.panTo()))},100),e.onkeydown=function(e){32==e.keyCode&&e.target==t.body&&e.preventDefault()}},"interactive"==t.readyState||"complete"==t.readyState?i():t.addEventListener("DOMContentLoaded",i)}(window,document,window.localStorage);